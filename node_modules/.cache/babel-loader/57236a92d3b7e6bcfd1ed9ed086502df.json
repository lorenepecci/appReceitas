{"ast":null,"code":"var _jsxFileName = \"/home/lorene/Trybe/MeusProjetosPessoais/appReceitas/src/pages/InProgress.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Favorites from '../components/ButtonFavorites';\nimport Share from '../components/ButtonShare';\nimport ProgressComponent from '../components/ProgressComponent';\nimport Context from '../context/Context';\nimport setLocalStorage from '../helpers/createLocalStorage';\nimport getlocalStorage from '../helpers/getLocalStore';\nimport pushDoneRecipesFunc from '../helpers/pushDoneRecipes';\nimport { getByType } from '../services/IDApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst copy = require('clipboard-copy');\n\nexport default function InProgress(_ref) {\n  _s();\n\n  let {\n    match: {\n      params: {\n        id,\n        foodOrDrink\n      }\n    }\n  } = _ref;\n  const history = useHistory();\n  const {\n    setDataDetailed,\n    setGetResult,\n    dataDetailed\n  } = useContext(Context);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [isLinkCopied, setIsLinkCopied] = useState(false);\n  useEffect(() => {\n    async function fetchData() {\n      const response = await getByType(id, foodOrDrink);\n      const results = response.meals ? response.meals : response.drinks;\n      await setDataDetailed(results);\n      await setGetResult(true);\n    }\n\n    fetchData();\n  }, []);\n\n  const handleClick = _ref2 => {\n    let {\n      target\n    } = _ref2;\n    copy(`http://localhost:3000/${foodOrDrink}/${target.id}`);\n    setIsLinkCopied(true);\n  };\n\n  const checkButton = updatedCheckedState => {\n    const check = updatedCheckedState.every(value => value === true);\n    setIsDisabled(!check);\n  };\n\n  const pushDoneRecipes = () => {\n    const newObjDone = pushDoneRecipesFunc(foodOrDrink, dataDetailed);\n    const getRecipes = getlocalStorage('doneRecipes');\n    const newList = [...getRecipes, newObjDone];\n    setLocalStorage('doneRecipes', newList);\n    history.push('/done-recipes');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [dataDetailed.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        \"data-testid\": \"recipe-photo\",\n        src: foodOrDrink === 'foods' ? dataDetailed[0].strMealThumb : dataDetailed[0].strDrinkThumb,\n        alt: \"Imagem da receita pronta\",\n        width: \"200px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        \"data-testid\": \"recipe-title\",\n        children: foodOrDrink === 'foods' ? dataDetailed[0].strMeal : dataDetailed[0].strDrink\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        \"data-testid\": \"share-btn\",\n        onClick: handleClick,\n        children: /*#__PURE__*/_jsxDEV(Share, {\n          id: foodOrDrink === 'foods' ? dataDetailed[0].idMeal : dataDetailed[0].idDrink,\n          alt: \"Icone de compartilhamento\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Favorites, {\n        alt: \"Icone de favoritar\",\n        foodOrDrink: foodOrDrink,\n        id: id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), isLinkCopied ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Link copied!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 29\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"recipe-category\",\n        children: foodOrDrink === 'foods' ? dataDetailed[0].strCategory : dataDetailed[0].strAlcoholic\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ProgressComponent, {\n        foodOrDrink: foodOrDrink,\n        id: id,\n        checkButton: checkButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Instructions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"instructions\",\n        children: dataDetailed[0].strInstructions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Carregando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      \"data-testid\": \"finish-recipe-btn\",\n      type: \"button\",\n      onClick: pushDoneRecipes,\n      disabled: isDisabled,\n      children: \"Finish Recipe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n_s(InProgress, \"826tJ8WAO52sqY/FLfpukm9eOR8=\", false, function () {\n  return [useHistory];\n});\n\n_c = InProgress;\nInProgress.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      foodOrDrink: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"InProgress\");","map":{"version":3,"sources":["/home/lorene/Trybe/MeusProjetosPessoais/appReceitas/src/pages/InProgress.js"],"names":["PropTypes","React","useContext","useEffect","useState","useHistory","Favorites","Share","ProgressComponent","Context","setLocalStorage","getlocalStorage","pushDoneRecipesFunc","getByType","copy","require","InProgress","match","params","id","foodOrDrink","history","setDataDetailed","setGetResult","dataDetailed","isDisabled","setIsDisabled","isLinkCopied","setIsLinkCopied","fetchData","response","results","meals","drinks","handleClick","target","checkButton","updatedCheckedState","check","every","value","pushDoneRecipes","newObjDone","getRecipes","newList","push","length","strMealThumb","strDrinkThumb","strMeal","strDrink","idMeal","idDrink","strCategory","strAlcoholic","strInstructions","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Favorites from '../components/ButtonFavorites';\nimport Share from '../components/ButtonShare';\nimport ProgressComponent from '../components/ProgressComponent';\nimport Context from '../context/Context';\nimport setLocalStorage from '../helpers/createLocalStorage';\nimport getlocalStorage from '../helpers/getLocalStore';\nimport pushDoneRecipesFunc from '../helpers/pushDoneRecipes';\nimport { getByType } from '../services/IDApi';\n\nconst copy = require('clipboard-copy');\n\nexport default function InProgress({ match: { params: { id, foodOrDrink } } }) {\n  const history = useHistory();\n  const {\n    setDataDetailed,\n    setGetResult,\n    dataDetailed,\n  } = useContext(Context);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [isLinkCopied, setIsLinkCopied] = useState(false);\n\n  useEffect(() => {\n    async function fetchData() {\n      const response = await getByType(id, foodOrDrink);\n      const results = response.meals ? response.meals : response.drinks;\n      await setDataDetailed(results);\n      await setGetResult(true);\n    }\n    fetchData();\n  }, []);\n\n  const handleClick = ({ target }) => {\n    copy(`http://localhost:3000/${foodOrDrink}/${target.id}`);\n    setIsLinkCopied(true);\n  };\n  const checkButton = (updatedCheckedState) => {\n    const check = updatedCheckedState.every((value) => (value === true));\n    setIsDisabled(!check);\n  };\n\n  const pushDoneRecipes = () => {\n    const newObjDone = pushDoneRecipesFunc(foodOrDrink, dataDetailed);\n    const getRecipes = getlocalStorage('doneRecipes');\n    const newList = [...getRecipes, newObjDone];\n    setLocalStorage('doneRecipes', newList);\n    history.push('/done-recipes');\n  };\n\n  return (\n    <div>\n      {dataDetailed.length\n        ? (\n          <div>\n            <img\n              data-testid=\"recipe-photo\"\n              src={ foodOrDrink === 'foods' ? dataDetailed[0].strMealThumb\n                : dataDetailed[0].strDrinkThumb }\n              alt=\"Imagem da receita pronta\"\n              width=\"200px\"\n            />\n\n            <h2 data-testid=\"recipe-title\">\n              { foodOrDrink === 'foods' ? dataDetailed[0].strMeal\n                : dataDetailed[0].strDrink }\n            </h2>\n            <button\n              type=\"button\"\n              data-testid=\"share-btn\"\n              onClick={ handleClick }\n            >\n              <Share\n                id={ foodOrDrink === 'foods' ? dataDetailed[0].idMeal\n                  : dataDetailed[0].idDrink }\n                alt=\"Icone de compartilhamento\"\n              />\n            </button>\n            <Favorites\n              alt=\"Icone de favoritar\"\n              foodOrDrink={ foodOrDrink }\n              id={ id }\n            />\n\n            {isLinkCopied ? <p>Link copied!</p> : null}\n            <p data-testid=\"recipe-category\">\n              { foodOrDrink === 'foods' ? dataDetailed[0].strCategory\n                : dataDetailed[0].strAlcoholic }\n            </p>\n\n            <ProgressComponent\n              foodOrDrink={ foodOrDrink }\n              id={ id }\n              checkButton={ checkButton }\n            />\n\n            <h3>Instructions</h3>\n            <p data-testid=\"instructions\">\n              { dataDetailed[0].strInstructions }\n            </p>\n          </div>\n        )\n        : <p>Carregando...</p>}\n      <button\n        data-testid=\"finish-recipe-btn\"\n        type=\"button\"\n        onClick={ pushDoneRecipes }\n        disabled={ isDisabled }\n      >\n        Finish Recipe\n      </button>\n    </div>\n  );\n}\n\nInProgress.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      foodOrDrink: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}